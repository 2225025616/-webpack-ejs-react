webpackJsonp([61],{576:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(577),l=a(i),u=n(295),s=a(u),f=function(){function e(t){r(this,e),this.values=t,this._errors={}}return o(e,[{key:"mustEqual",value:function(e,t,n){return this.values[e]!=t&&(this.errors[e]=n),this}},{key:"postCode",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validatePostCode(this.values[e])||(this.errors[e]=s.default.translate("validate.postcode",{field:t})),this}},{key:"money",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validateMoney(this.values[e])||(this.errors[e]=s.default.translate("validate.post-money",{field:t})),this}},{key:"payMoney",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validatePayMoney(this.values[e])||(this.errors[e]=s.default.translate("validate.post-money",{field:t})),this}},{key:"phoneNumber",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validatePhoneNumber(this.values[e])||(this.errors[e]=s.default.translate("validate.phone-number",{field:t})),this}},{key:"phone",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validatePhoneNumber(this.values[e])||(this.errors[e]=s.default.translate("validate.phone-number",{field:t})),this}},{key:"name",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validateRealName(this.values[e])||(this.errors[e]=s.default.translate("validate.real-name",{field:t})),this}},{key:"email",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validateEmail(this.values[e])||(this.errors[e]=s.default.translate("validate.email",{field:t})),this}},{key:"realName",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validateRealName(this.values[e])||(this.errors[e]=s.default.translate("validate.real-name",{field:t})),this}},{key:"nonEmpty",value:function(e,t){return this.values[e]&&!/^\s*$/.test(this.values[e])||(this.errors[e]=s.default.translate("validate.not-empty",{field:t})),this}},{key:"creditCard",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validateCreditCard(this.values[e])||(this.errors[e]=s.default.translate("validate.credit-card",{field:t})),this}},{key:"verifyCode",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validateVerifyCode(this.values[e])||(this.errors[e]=s.default.translate("validate.verify-code",{field:t})),this}},{key:"captcha",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validateCaptcha(this.values[e])||(this.errors[e]=s.default.translate("validate.verify-code",{field:t})),this}},{key:"password",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validatePassword(this.values[e])||(this.errors[e]=s.default.translate("validate.password",{field:t})),this}},{key:"rePassword",value:function(e,t,n){return(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&this.nonEmpty(e,n),l.default.validatePassword(this.values[e])?this.values[e]!==this.values[t]&&(this.errors[e]=s.default.translate("两次密码不一致")):this.errors[e]=s.default.translate("validate.password",{field:n}),this}},{key:"idCard",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validateIdCard(this.values[e])||(this.errors[e]=s.default.translate("validate.id-card",{field:t})),this}},{key:"url",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validateUrl(this.values[e])||(this.errors[e]=s.default.translate("validate.url",{field:t})),this}},{key:"chineseLength",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validateChineseLength(this.values[e])||(this.errors[e]=s.default.translate("validate.packageName",{field:t})),this}},{key:"CreditCodeLength",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validateCreditCodeLength(this.values[e])||(this.errors[e]=s.default.translate("请输入正确的18位社会信用代码",{field:t})),this}},{key:"positiveInteger",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validatePositiveInteger(this.values[e])||(this.errors[e]=s.default.translate("validate.real-name",{field:t})),this}},{key:"imageCode",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),l.default.validateImageCode(this.values[e])||(this.errors[e]=s.default.translate("validate.imageCode",{field:t})),this}},{key:"errors",get:function(){return this._errors}}]),e}();t.default=f},577:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){n(this,e)}return a(e,null,[{key:"validatePhoneNumber",value:function(e){return!e||/^1[0-9]{10}$/.test(e)}},{key:"validatePassword",value:function(e){return!e||/(?=.*[0-9])(?=.*[a-zA-Z]).{6,18}$/.test(e)&&e.indexOf(" ")<=-1}},{key:"validateVerifyCode",value:function(e){return!e||/[0-9]{4}/.test(e)}},{key:"validateCaptcha",value:function(e){return!e||/^[\da-zA-Z]{4}$/.test(e)}},{key:"validatePostCode",value:function(e){return!e||/^[1-9][0-9]{5}$/.test(e)}},{key:"validateMoney",value:function(e){return!e||/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/.test(e)}},{key:"validatePayMoney",value:function(e){return!e||/^[0-9]{1,7}([.][0-9]{1,2})?$/.test(e)}},{key:"validateEmail",value:function(e){return!e||/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)}},{key:"validateUrl",value:function(e){return!e||/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-.,@?^=%&:\/~+#]*[\w\-@?^=%&\/~+#])?/.test(e)}},{key:"validateRealName",value:function(e){return e&&(e=e.trim()),!e||/^[\u4e00-\u9fa5]{2,6}$/.test(e.trim())}},{key:"validateIdCard",value:function(e){if(!/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(e))return!1;if(18==e.length){var t,n=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),a=new Array("1","0","X","9","8","7","6","5","4","3","2"),r=0;for(t=0;t<17;t++)r+=e.substr(t,1)*n[t];return a[r%11]==e.substr(17,1)}}},{key:"validateCreditCard",value:function(e){if(/[^0-9-\s]+/.test(e))return!0;var t=0,n=0,a=!1;e=e.replace(/\D/g,"");for(var r=e.length-1;r>=0;r--){var o=e.charAt(r),n=parseInt(o,10);a&&(n*=2)>9&&(n-=9),t+=n,a=!a}return t%10==0}},{key:"validateChineseLength",value:function(e){return!e||/^[\u4e00-\u9fa5]{1,10}$/.test(e)}},{key:"validateCreditCodeLength",value:function(e){return!e||/^\w{18}$/.test(e)}},{key:"validatePositiveInteger",value:function(e){return!e||/^[0-9]*$/.test(e)}},{key:"validateImageCode",value:function(e){return!e||/^[a-zA-Z0-9]{4}$/.test(e)}}]),e}();t.default=r},686:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(25),l=(function(e){e&&e.__esModule?e:{default:e}}(i),function(){function e(){a(this,e)}return o(e,null,[{key:"ignoreFileUrl",value:function(e,t){return Object.assign({},e,{value:null,onChange:function(n){e.value=n.target.files,t&&t.forceUpdate(),e.onChange(n)}})}},{key:"trimStringImage",value:function(e){for(var t=r({},e),n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];for(var i in a)t[a[i]]instanceof FileList||(t[a[i]]=void 0);return t}},{key:"imageSrc",value:function(e){return e.value instanceof FileList?e.value.length>=1?e.value[0]:null:e.value}},{key:"extract",value:function(e,t){var n=void 0;n="select"===t?function(t,n,a){e.onChange(a)}:function(t){e.onChange(t)};var a=e.error,r=e.checked,o=e.defaultChecked,i=e.value,l=e.defaultValue,u=e.onBlur,s=e.onDragStart,f=e.onDrop,d=e.onFocus;return{errorText:e.touched&&a,checked:r,defaultChecked:o,value:i,defaultValue:l,onBlur:u,onChange:n,onDragStart:s,onDrop:f,onFocus:d}}}]),e}());t.default=l},687:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,l,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(25),f=function(e){return e&&e.__esModule?e:{default:e}}(s),d=n(245),c=(i=(0,d.connect)(function(e){return{loading:e.api.loading}}))(l=function(e){function t(){var e,n,o,i;a(this,t);for(var l=arguments.length,u=Array(l),s=0;s<l;s++)u[s]=arguments[s];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o.handleTouchTap=function(e){o.clicked=!0,o.props.onClick&&o.props.onClick(e)},i=n,r(o,i)}return o(t,e),u(t,[{key:"render",value:function(){var e=this.clicked;this.clicked=!1;var t=this.props,n=t.className,a=t.type,r=t.style;t.buttonStyle;return f.default.createElement("button",{className:n,type:a,style:r,disabled:this.props.disabled||this.props.loading,onClick:this.handleTouchTap},e&&this.props.loading?this.props.loadingLabel:this.props.label)}}]),t}(s.Component))||l;t.default=c},1625:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(25),u=function(e){return e&&e.__esModule?e:{default:e}}(l),s=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.props.onClose&&n.props.onClose(),n.setState({open:!1})},n.state={open:!!e.open},n}return o(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){void 0!==e.open&&this.setState({open:!!e.open})}},{key:"hide",value:function(){this.setState({open:!1})}},{key:"show",value:function(){this.setState({open:!0})}},{key:"render",value:function(){return u.default.createElement("div",null)}}]),t}(l.Component);t.default=s},1659:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(25),s=a(u),f=n(1625),d=a(f),c=n(687),h=a(c),p={button:{marginTop:8,float:"right"},iconButton:{position:"absolute",right:8,top:8},textfield:{width:"100%"}},v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleConfirmOk=function(e){n.props.onConfirmOk()},n.handleConfirmChange=function(e){n.inputText=e.target.value,n.forceUpdate()},n.handleClose=function(){n.hide()},n.state={confirmText:n.props.confirmText,open:n.props.open},n}return i(t,e),l(t,[{key:"show",value:function(e){this.setState({open:!0,confirmText:e})}},{key:"hide",value:function(){this.setState({open:!1,confirmText:""})}},{key:"render",value:function(){return s.default.createElement(d.default,{ref:"modal",title:this.props.title,open:this.state.open},s.default.createElement("div",null,s.default.createElement("div",{className:"cancel-button"},s.default.createElement("button",{style:p.iconButton,onTouchTap:this.handleClose})),s.default.createElement("p",{className:"delete-name"},this.state.confirmText),s.default.createElement("input",{style:p.textfield,placeholder:this.props.prompt,onChange:this.handleConfirmChange}),s.default.createElement(h.default,{buttonStyle:"flat",style:p.button,loadingLabel:this.props.label+"中...",label:this.props.label,disabled:!(this.inputText==this.state.confirmText),onTouchTap:this.handleConfirmOk})))}}]),t}(u.Component);t.default=v},1668:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(25),c=a(d),h=n(469),p=n(841),v=a(p),m=n(686),y=a(m),b=n(452),g=a(b),k=n(576),w=a(k),C=n(1045),E=a(C),_=n(1092),O=n(1625),P=a(O),j=n(687),T=a(j),M=n(1659),N=a(M),x=n(295),S=a(x),$={tBody:{borderTop:"1px solid #e0e0e0",borderBottom:"1px solid #E0E0E0"},railsButton:{marginTop:16,marginLeft:8},modalButton:{marginTop:8,float:"right"},iconButton:{position:"absolute",right:8,top:8},textfield:{width:"100%"}},A=["phoneNumber"],I=function(e){return new w.default(e).nonEmpty("phoneNumber","手机号码").phoneNumber("phoneNumber","手机号码").errors},z=(l=(0,h.reduxForm)({form:"memberForm",fields:A,validate:I},function(e){return{members:e.user.members,organization:e.organization.info,params:e.router.params}}))(u=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:!1},n.handleInvite=function(){n.refs.modal.show()},n.handleClose=function(){n.refs.modal.hide()},n.handleDestroyMember=function(e){var t=v.default.organizationId(n.props);n.props.dispatch((0,_.removeMember)(t,n.wantToDelete.id)),n.refs.confirm.hide()},n.handleConfirmDestroyMember=function(e){n.wantToDelete=e,n.forceUpdate(),n.refs.confirm.show(e.phoneNumber)},n.handleAddMember=function(e){e.preventDefault(),n.props.dispatch((0,_.addMember)(v.default.organizationId(n.props),n.props.fields.phoneNumber.value,function(){n.refs.modal.hide()}))},n.wantToDelete={},n}return i(t,e),f(t,[{key:"componentDidMount",value:function(){this.props.dispatch((0,_.findAllMembers)(v.default.organizationId(this.props)))}},{key:"render",value:function(){var e=this.props,t=e.fields.phoneNumber;e.organization,e.members,g.default.uid;return c.default.createElement("div",{className:"container-wrapper"},c.default.createElement("div",{className:"container members-manage"},c.default.createElement("ul",{className:"breadcrumb"},c.default.createElement("li",null,E.default.organizationName()),c.default.createElement("li",null,S.default.translate("sidebar.org-member"))),c.default.createElement("div",null,c.default.createElement("button",{label:S.default.translate("common.add-member"),style:$.railsButton,onClick:this.handleInvite}))),c.default.createElement(N.default,{ref:"confirm",title:S.default.translate("common.delete-member"),prompt:S.default.translate("common.input-delete-member"),label:S.default.translate("common.delete"),onConfirmOk:this.handleDestroyMember}),c.default.createElement(P.default,{ref:"modal",title:S.default.translate("common.add-member")},c.default.createElement("form",{autoComplete:"off",onSubmit:this.handleAddMember,className:"form-group"},c.default.createElement("div",{className:"cancel-button"},c.default.createElement("button",{style:$.iconButton,onTouchTap:this.handleClose})),c.default.createElement("input",s({},y.default.extract(t),{type:"text",placeholder:S.default.translate("common.input-member-no"),style:$.textfield})),c.default.createElement(T.default,{style:$.modalButton,type:"submit",label:S.default.translate("common.invite"),buttonStyle:"flat",loadingLabel:S.default.translate("common.inviting")}))))}}]),t}(d.Component))||u;t.default=z}});