webpackJsonp([56],{576:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(577),i=a(o),u=n(295),s=a(u),f=function(){function e(t){r(this,e),this.values=t,this._errors={}}return l(e,[{key:"mustEqual",value:function(e,t,n){return this.values[e]!=t&&(this.errors[e]=n),this}},{key:"postCode",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validatePostCode(this.values[e])||(this.errors[e]=s.default.translate("validate.postcode",{field:t})),this}},{key:"money",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validateMoney(this.values[e])||(this.errors[e]=s.default.translate("validate.post-money",{field:t})),this}},{key:"payMoney",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validatePayMoney(this.values[e])||(this.errors[e]=s.default.translate("validate.post-money",{field:t})),this}},{key:"phoneNumber",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validatePhoneNumber(this.values[e])||(this.errors[e]=s.default.translate("validate.phone-number",{field:t})),this}},{key:"phone",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validatePhoneNumber(this.values[e])||(this.errors[e]=s.default.translate("validate.phone-number",{field:t})),this}},{key:"name",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validateRealName(this.values[e])||(this.errors[e]=s.default.translate("validate.real-name",{field:t})),this}},{key:"email",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validateEmail(this.values[e])||(this.errors[e]=s.default.translate("validate.email",{field:t})),this}},{key:"realName",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validateRealName(this.values[e])||(this.errors[e]=s.default.translate("validate.real-name",{field:t})),this}},{key:"nonEmpty",value:function(e,t){return this.values[e]&&!/^\s*$/.test(this.values[e])||(this.errors[e]=s.default.translate("validate.not-empty",{field:t})),this}},{key:"creditCard",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validateCreditCard(this.values[e])||(this.errors[e]=s.default.translate("validate.credit-card",{field:t})),this}},{key:"verifyCode",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validateVerifyCode(this.values[e])||(this.errors[e]=s.default.translate("validate.verify-code",{field:t})),this}},{key:"captcha",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validateCaptcha(this.values[e])||(this.errors[e]=s.default.translate("validate.verify-code",{field:t})),this}},{key:"password",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validatePassword(this.values[e])||(this.errors[e]=s.default.translate("validate.password",{field:t})),this}},{key:"rePassword",value:function(e,t,n){return(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&this.nonEmpty(e,n),i.default.validatePassword(this.values[e])?this.values[e]!==this.values[t]&&(this.errors[e]=s.default.translate("两次密码不一致")):this.errors[e]=s.default.translate("validate.password",{field:n}),this}},{key:"idCard",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validateIdCard(this.values[e])||(this.errors[e]=s.default.translate("validate.id-card",{field:t})),this}},{key:"url",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validateUrl(this.values[e])||(this.errors[e]=s.default.translate("validate.url",{field:t})),this}},{key:"chineseLength",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validateChineseLength(this.values[e])||(this.errors[e]=s.default.translate("validate.packageName",{field:t})),this}},{key:"CreditCodeLength",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validateCreditCodeLength(this.values[e])||(this.errors[e]=s.default.translate("请输入正确的18位社会信用代码",{field:t})),this}},{key:"positiveInteger",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validatePositiveInteger(this.values[e])||(this.errors[e]=s.default.translate("validate.real-name",{field:t})),this}},{key:"imageCode",value:function(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.nonEmpty(e,t),i.default.validateImageCode(this.values[e])||(this.errors[e]=s.default.translate("validate.imageCode",{field:t})),this}},{key:"errors",get:function(){return this._errors}}]),e}();t.default=f},577:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){n(this,e)}return a(e,null,[{key:"validatePhoneNumber",value:function(e){return!e||/^1[0-9]{10}$/.test(e)}},{key:"validatePassword",value:function(e){return!e||/(?=.*[0-9])(?=.*[a-zA-Z]).{6,18}$/.test(e)&&e.indexOf(" ")<=-1}},{key:"validateVerifyCode",value:function(e){return!e||/[0-9]{4}/.test(e)}},{key:"validateCaptcha",value:function(e){return!e||/^[\da-zA-Z]{4}$/.test(e)}},{key:"validatePostCode",value:function(e){return!e||/^[1-9][0-9]{5}$/.test(e)}},{key:"validateMoney",value:function(e){return!e||/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/.test(e)}},{key:"validatePayMoney",value:function(e){return!e||/^[0-9]{1,7}([.][0-9]{1,2})?$/.test(e)}},{key:"validateEmail",value:function(e){return!e||/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)}},{key:"validateUrl",value:function(e){return!e||/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-.,@?^=%&:\/~+#]*[\w\-@?^=%&\/~+#])?/.test(e)}},{key:"validateRealName",value:function(e){return e&&(e=e.trim()),!e||/^[\u4e00-\u9fa5]{2,6}$/.test(e.trim())}},{key:"validateIdCard",value:function(e){if(!/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(e))return!1;if(18==e.length){var t,n=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),a=new Array("1","0","X","9","8","7","6","5","4","3","2"),r=0;for(t=0;t<17;t++)r+=e.substr(t,1)*n[t];return a[r%11]==e.substr(17,1)}}},{key:"validateCreditCard",value:function(e){if(/[^0-9-\s]+/.test(e))return!0;var t=0,n=0,a=!1;e=e.replace(/\D/g,"");for(var r=e.length-1;r>=0;r--){var l=e.charAt(r),n=parseInt(l,10);a&&(n*=2)>9&&(n-=9),t+=n,a=!a}return t%10==0}},{key:"validateChineseLength",value:function(e){return!e||/^[\u4e00-\u9fa5]{1,10}$/.test(e)}},{key:"validateCreditCodeLength",value:function(e){return!e||/^\w{18}$/.test(e)}},{key:"validatePositiveInteger",value:function(e){return!e||/^[0-9]*$/.test(e)}},{key:"validateImageCode",value:function(e){return!e||/^[a-zA-Z0-9]{4}$/.test(e)}}]),e}();t.default=r},687:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(25),f=function(e){return e&&e.__esModule?e:{default:e}}(s),d=n(245),c=(o=(0,d.connect)(function(e){return{loading:e.api.loading}}))(i=function(e){function t(){var e,n,l,o;a(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=l=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),l.handleTouchTap=function(e){l.clicked=!0,l.props.onClick&&l.props.onClick(e)},o=n,r(l,o)}return l(t,e),u(t,[{key:"render",value:function(){var e=this.clicked;this.clicked=!1;var t=this.props,n=t.className,a=t.type,r=t.style;t.buttonStyle;return f.default.createElement("button",{className:n,type:a,style:r,disabled:this.props.disabled||this.props.loading,onClick:this.handleTouchTap},e&&this.props.loading?this.props.loadingLabel:this.props.label)}}]),t}(s.Component))||i;t.default=c},1625:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(25),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.props.onClose&&n.props.onClose(),n.setState({open:!1})},n.state={open:!!e.open},n}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){void 0!==e.open&&this.setState({open:!!e.open})}},{key:"hide",value:function(){this.setState({open:!1})}},{key:"show",value:function(){this.setState({open:!0})}},{key:"render",value:function(){return u.default.createElement("div",null)}}]),t}(i.Component);t.default=s},1658:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,u,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(25),c=a(d),p=n(841),h=a(p),y=n(1659),v=a(y),m=n(448),b=a(m),g=n(1092),k=n(469),E=n(576),w=(a(E),n(573)),C=a(w),_=n(687),O=a(_),T=n(317),N=a(T),P=n(1045),j=a(P),S=n(295),K=a(S),x={button:{margin:16,height:36},flatBtn:{marginTop:94},newBtn:{margin:"16px 0"},types:{width:100,display:"flex"},icon:{fill:"#03a9f4"}},A=!0,z="TRUSTY",M=["key"],$=(i=(0,k.reduxForm)({form:"apiKeys",fields:M},function(e){return{organization:e.organization.info,apiKeys:e.organization.apiKeys,inNewKey:e.organization.inNewKey,params:e.router.params,onSubmit:function(t,n){var a=h.default.organizationId(e.router);n((0,g.addApiKey)(a,{key:t.key,type:z}))}}}))(u=function(e){function t(e){r(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDestroyKey=function(e){var t=h.default.organizationId(n.props);n.props.dispatch((0,g.removeApiKey)(t,n.wantToDelete.id)),n.refs.deleteConfirm.hide()},n.handleConfirmDestroyKey=function(e){n.wantToDelete=e,n.refs.deleteConfirm.show(n.wantToDelete.id)},n.handleNewKey=function(e){A=!0,n.props.inNewKey||n.props.dispatch({type:b.default.SWITCH_TO_NEW_KEY})},n.handleCloseNewKey=function(e){n.props.inNewKey&&n.props.dispatch({type:b.default.CLOSE_TO_NEW_KEY})},n.handleChangeType=function(e){A=!A,n.forceUpdate()},n.changeType=function(e){z=e,n.forceUpdate()},n.wantToDelete={id:""},n}return o(t,e),f(t,[{key:"componentDidMount",value:function(){var e=h.default.organizationId(this.props);e&&this.props.dispatch((0,g.findApiKeys)(e))}},{key:"componentWillReceiveProps",value:function(e){var t=h.default.organizationId(e);t!==h.default.organizationId(this.props)&&this.props.dispatch((0,g.findApiKeys)(t))}},{key:"render",value:function(){var e=this,t=this.props,a=t.apiKeys,r=t.fields.key,l=t.handleSubmit,o=t.inNewKey,i=(t.organization,C.default.get("yyyy-mm-dd"));return c.default.createElement("div",{className:"container-wrapper"},c.default.createElement("div",{className:"container ApiKey"},c.default.createElement("ul",{className:"breadcrumb"},c.default.createElement("li",null,j.default.organizationName()),c.default.createElement("li",null,K.default.translate("sidebar.org-key"))),0===a.length?c.default.createElement("div",{className:"new-keys"},c.default.createElement("span",null,K.default.translate("apikey.no-key")),c.default.createElement("button",{style:x.button,type:"button",label:K.default.translate("common.new"),onClick:this.handleNewKey})):"",a.map(function(t){return c.default.createElement("div",null,c.default.createElement("div",{className:"org-info"},c.default.createElement("div",{className:"api-key"},c.default.createElement("img",{src:n("TRUSTY"===t.type?1660:1661)}),c.default.createElement("p",null,"TRUSTY"===t.type?K.default.translate("apikey.product"):K.default.translate("apikey.test"))),c.default.createElement("div",{className:"info-key"},c.default.createElement("p",{className:"access-key"},"Access Key：",t.id),c.default.createElement("p",null,K.default.translate("apikey.org-name"),"：",t.subjectName),c.default.createElement("p",null,K.default.translate("apikey.cert-org"),"：",t.issuerName),c.default.createElement("p",null,K.default.translate("apikey.validate"),"：",i.format(t.notAfter)),c.default.createElement("div",{className:"use-time"},t.lastUsedAt?K.default.translate("apikey.last-use")+(0,N.default)(t.lastUsedAt).fromNow():K.default.translate("apikey.never-use"))),c.default.createElement("button",{style:x.flatBtn,onTouchTap:function(n){return e.handleConfirmDestroyKey(t)},label:K.default.translate("common.delete")})))}),o?c.default.createElement("form",{className:"simple_form",onSubmit:l},c.default.createElement("div",{className:"form-group"},c.default.createElement("button",{iconStyle:x.icon,value:"TRUSTY",label:K.default.translate("common.product"),onTouchTap:function(){return e.changeType("TRUSTY")}}),c.default.createElement("button",{iconStyle:x.icon,value:"SANDBOX",label:K.default.translate("common.test"),onTouchTap:function(){return e.changeType("SANDBOX")}})),c.default.createElement("label",{className:"required string"},K.default.translate("apikey.public-key"),":"),c.default.createElement("div",{className:"from-group"},c.default.createElement("textarea",s({style:{width:"100%",height:"300px"},placeholder:K.default.translate("apikey.rsa-public-key")},r))),c.default.createElement(O.default,{style:x.button,type:"submit",loadingLabel:K.default.translate("common.saving"),label:K.default.translate("common.save")}),c.default.createElement("button",{style:x.button,type:"button",label:K.default.translate("common.cancel"),onClick:this.handleCloseNewKey})):0===a.length?"":c.default.createElement("button",{style:x.newBtn,type:"button",label:K.default.translate("common.new"),onClick:this.handleNewKey})),c.default.createElement(v.default,{ref:"deleteConfirm",title:K.default.translate("common.delete-key"),prompt:K.default.translate("common.input-key-id"),label:K.default.translate("common.delete"),onConfirmOk:this.handleDestroyKey}))}}]),t}(d.Component))||u;t.default=$},1659:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(25),s=a(u),f=n(1625),d=a(f),c=n(687),p=a(c),h={button:{marginTop:8,float:"right"},iconButton:{position:"absolute",right:8,top:8},textfield:{width:"100%"}},y=function(e){function t(e){r(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleConfirmOk=function(e){n.props.onConfirmOk()},n.handleConfirmChange=function(e){n.inputText=e.target.value,n.forceUpdate()},n.handleClose=function(){n.hide()},n.state={confirmText:n.props.confirmText,open:n.props.open},n}return o(t,e),i(t,[{key:"show",value:function(e){this.setState({open:!0,confirmText:e})}},{key:"hide",value:function(){this.setState({open:!1,confirmText:""})}},{key:"render",value:function(){return s.default.createElement(d.default,{ref:"modal",title:this.props.title,open:this.state.open},s.default.createElement("div",null,s.default.createElement("div",{className:"cancel-button"},s.default.createElement("button",{style:h.iconButton,onTouchTap:this.handleClose})),s.default.createElement("p",{className:"delete-name"},this.state.confirmText),s.default.createElement("input",{style:h.textfield,placeholder:this.props.prompt,onChange:this.handleConfirmChange}),s.default.createElement(p.default,{buttonStyle:"flat",style:h.button,loadingLabel:this.props.label+"中...",label:this.props.label,disabled:!(this.inputText==this.state.confirmText),onTouchTap:this.handleConfirmOk})))}}]),t}(u.Component);t.default=y},1660:function(e,t,n){e.exports=n.p+"api-keys-trusty-3IaXyDR.png"},1661:function(e,t,n){e.exports=n.p+"api-keys-sandbox-aO7x9UW.png"}});