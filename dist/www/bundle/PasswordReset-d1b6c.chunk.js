webpackJsonp([80],{696:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return function(r){new c.default(r).post("/sms",{phoneNumber:e,type:t,eContractId:n||""},function(){r(i(t))})}}function a(e,t,n,r){return function(o){new c.default(o).post("/user/sms",{phoneNumber:e,checkCode:t,type:n,userRegType:r},function(){o(i(n))})}}function i(e){if(!(f[e]>0))return f[e]=60,function(t){!function n(){t({type:l.default.DEC_SMS_VERIFY_CODE_REMAIN_TIME,remainTime:f}),--f[e]>=0&&setTimeout(n,1e3)}()}}Object.defineProperty(t,"__esModule",{value:!0}),t.verifySmsCode=o,t.verifySmsImgCode=a;var u=n(448),l=r(u),s=n(449),c=r(s),f={}},697:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=(o=r=function e(){n(this,e)},r.Pay_URLATTESTATION="URLATTESTATION_PAY",r.Pay_ECONTRACT="ECONTRACT_PAY",r.Pay_NOTARY="NOTARY_PAY",r.Register="REGISTER",r.Pwd="FORGOT_PASSWORD",r.EContract="ECONTRACT_SIGN",r.Authentic="AUTHENTIC",r.Login="LOGIN",r.BIND_PHONE="BIND_PHONE",r.getTypes=function(){return["Pay_URLATTESTATION","Pay_ECONTRACT","Pay_NOTARY","Register","pwd","EContract","Authentic","LOGIN","BIND_PHONE"].map(function(e){return{name:e,value:a[e]}})},o);t.default=a},1981:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(25),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"render",value:function(){return l.default.createElement("div",{className:"mobile-header"},this.props.children)}}]),t}(u.Component);t.default=s},1998:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(25),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){var e,n,a,i;r(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.test=function(){window.history.back()},i=n,o(a,i)}return a(t,e),i(t,[{key:"render",value:function(){return l.default.createElement("span",{className:"back",onClick:this.test})}}]),t}(u.Component);t.default=s},2e3:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=n(25),d=r(f),p=n(1981),m=r(p),h=n(1998),y=r(h),b=n(686),w=r(b),v=n(576),_=r(v),P=n(469),E=n(447),C=n(696),O=n(456),g=n(577),T=r(g),N=n(697),j=r(N),A=function(e){return new _.default(e).verifyCode("verifyCode","短信验证码").nonEmpty("checkCode","图形验证码").password("password","数字字母组合密码").phoneNumber("phoneNumber","正确的手机号").errors},R=["phoneNumber","password","verifyCode","checkCode"],S=(u=(0,P.reduxForm)({form:"reset_password",fields:R,validate:A},function(e){return c({},e.sms,{user:e.user.info,imageCode:e.admin.imageCode,pathname:e.router.location.pathname,onSubmit:function(t,n){n((0,E.resetPassword)(t,e.router.location.query.next||"/mobile/sign-in"))}})}))(l=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.data={title:"密码重置"},r.state={oldPassword:"",newPassword:"",confirmPassword:"",invalid:!0},r.componentWillMount=function(){r.handleGetGraphicCode()},r.handleGetGraphicCode=function(){r.props.dispatch((0,O.getGraphicCode)())},r.changePassword=function(e){e.preventDefault();var t=r.state,n=t.oldPassword,o=t.newPassword;r.props.dispatch((0,E.modifyPassword)({oldPassword:n,newPassword:o},function(){r.refs.old.value=null,r.refs.new.value=null,r.refs.confirm.value=null,r.setState({invalid:!0})}))},r.inputChange=function(e){return function(t){var n={},o=r.state,a=o.newPassword,i=o.confirmPassword;n[e]=t.target.value;var u="newPassword"===e?n[e]:a,l="confirmPassword"===e?n[e]:i;n.invalid=!u||!T.default.validatePassword(u)||u!==l,r.setState(n)}},i=n,a(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.fields,r=n.phoneNumber,o=n.verifyCode,a=n.password,i=n.checkCode,u=t.user,l=t.invalid,s=t.remainTime,f=t.dispatch,p=t.imageCode,h=j.default.Pwd;return d.default.createElement("div",{className:"user-common"},d.default.createElement(m.default,null,d.default.createElement(y.default,null),d.default.createElement("span",{className:"title"},this.data.title),d.default.createElement("span",{className:"back",style:{opacity:0}})),u.id?d.default.createElement("div",{className:"form"},d.default.createElement("input",{placeholder:"请输入原密码",type:"password",onChange:this.inputChange("oldPassword"),ref:"old"}),d.default.createElement("input",{placeholder:"请输入新密码 (不少于6位数, 数字+字母)",type:"password",onChange:this.inputChange("newPassword"),ref:"new"}),d.default.createElement("input",{placeholder:"请再次输入新密码",type:"password",onChange:this.inputChange("confirmPassword"),ref:"confirm"}),d.default.createElement("button",{className:"action "+(this.state.invalid?"btn-disabled":""),disabled:this.state.invalid,onClick:this.changePassword},"重置密码")):d.default.createElement("form",{onSubmit:this.props.handleSubmit},d.default.createElement("input",c({placeholder:"请输入手机号",type:"text"},w.default.extract(r))),d.default.createElement("div",{className:"image-code-wrap"},d.default.createElement("input",c({placeholder:"请输入图形验证码",type:"text"},w.default.extract(i))),d.default.createElement("img",{src:"data:image/png;base64,"+p,onClick:this.handleGetGraphicCode})),d.default.createElement("div",{className:"phone-number-wrap"},d.default.createElement("input",c({placeholder:"请输入验证码",type:"text"},w.default.extract(o))),d.default.createElement("button",{className:"btn-code "+(s[h]>0||r.invalid?"btn-disabled":""),disabled:!!(s[h]>0||r.invalid)||"",onClick:function(e){return f((0,C.verifySmsCode)(r.value,h))}},s[h]>0?s[h]+" 秒":"获取验证码")),d.default.createElement("input",c({placeholder:"请输入新密码",type:"password"},w.default.extract(a))),d.default.createElement("input",{placeholder:"请再次输入新密码",type:"password",onChange:function(t){return e.setState({confirmPassword:t.target.value})}}),d.default.createElement("button",{type:"submit",className:"action "+(l||a.value!==this.state.confirmPassword?"btn-disabled":""),disabled:l||a.value!==this.state.confirmPassword},"重置密码")))}}]),t}(f.Component))||l;t.default=S}});